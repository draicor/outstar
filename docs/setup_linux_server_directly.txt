####################################################################################################
# Setup the linux server to host the server directly

# To upload client files to linux using powershell:
scp C:\Users\Draicor\Documents\Draicor\mmo\client\bin\linux\libdd3d.linux.editor.x86_64.so draicor@64.223.161.129:/home/draicor
scp C:\Users\Draicor\Documents\Draicor\mmo\client\bin\linux\mmo_client_linux_v0.0.3.6.x86_64 draicor@64.223.161.129:/home/draicor

# To upload the server files to linux using powershell:
scp C:\Users\Draicor\Documents\Draicor\mmo\server\cmd\db.sqlite draicor@64.223.161.129:/home/draicor

scp C:\Users\Draicor\Documents\Draicor\mmo\server\cmd\mmo-server-linux-arm64-v0.0.3.6 draicor@64.223.161.129:/home/draicor

# switch to root user (if not logged in as root)
sudo su -

# Update the OS and then install the database
sudo apt update
sudo apt install sqlite3

# We access our folder
cd /home/draicor/mmo/server

# After copying the sqlite db and the server binary to the /home/draicor folder
# Update the permissions of the file
chmod +x ./mmo-server-linux-arm64-v0.0.1.0

# I ran it in the foreground by using
./mmo-server-linux-arm64-v0.0.1.0

## Setting it up as a Systemd service

# Navigate into the systemd folder and create a new config file
cd /etc/systemd/system
touch mmo-server.service
nano mmo-server.service

# Add the following lines to the config file
[Unit]
Description=MMO Server
After=network.target

[Service]
ExecStart=/home/draicor/mmo-server-linux-arm64-v0.0.1.0
RemainAfterExit=no
Restart=always
RestartSec=30s

[Install]
WantedBy=multi-user.target

# Save the file by doing control+O and then enter, then close # nano by doing control+X

# Enable the service and start it
sudo systemctl enable mmo-server.service
sudo systemctl start mmo-server

# If a service config file is updated, run systemctl daemon-reload

# To reset the server after updating it
systemctl restart mmo-server
systemctl status mmo-server

# Everytime we update the server, we need to re-compile the binary, upload it to the remote server
# and then update the service config file and restart it
# Also, we need to pull the db every now and then from the remote server into a secure location.

# rm to remove a file
# mkdir to create a folder