[gd_scene load_steps=32 format=4 uid="uid://cb5es8vr13ukq"]

[ext_resource type="Script" uid="uid://ews1d10clxi3" path="res://classes/sfx/projectile_muzzle_flash.gd" id="1_plcon"]
[ext_resource type="Texture2D" uid="uid://cr458d4loif5y" path="res://assets/textures/sfx/flash/flash_01.png" id="2_gw5d1"]
[ext_resource type="Texture2D" uid="uid://cnku63gfss23d" path="res://assets/textures/sfx/muzzle/muzzle_04_rotated.png" id="2_plcon"]
[ext_resource type="Texture2D" uid="uid://b5gew0shg3e20" path="res://assets/textures/sfx/smoke/smoke_sprites.png" id="4_plcon"]

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_kspet"]
transparency = 1
blend_mode = 1
cull_mode = 2
shading_mode = 0
specular_mode = 2
vertex_color_use_as_albedo = true
vertex_color_is_srgb = true
albedo_texture = ExtResource("2_plcon")
disable_receive_shadows = true
billboard_keep_scale = true

[sub_resource type="Curve" id="Curve_dmkd8"]
_data = [Vector2(0.5, 0.8), 0.0, 0.0, 0, 0, Vector2(1, 0), 0.0, 0.0, 0, 0]
point_count = 2

[sub_resource type="CurveTexture" id="CurveTexture_gw5d1"]
curve = SubResource("Curve_dmkd8")

[sub_resource type="Curve" id="Curve_gw5d1"]
_data = [Vector2(0, 0), 0.0, 0.577552, 0, 0, Vector2(1, 0.3), -0.0877191, 0.0, 0, 0]
point_count = 2

[sub_resource type="CurveTexture" id="CurveTexture_krxvi"]
curve = SubResource("Curve_gw5d1")

[sub_resource type="ParticleProcessMaterial" id="ParticleProcessMaterial_plcon"]
angle_min = 1.07288e-05
angle_max = 1.07288e-05
direction = Vector3(0, 0, 1)
spread = 0.0
gravity = Vector3(0, 0, 0)
attractor_interaction_enabled = false
scale_curve = SubResource("CurveTexture_krxvi")
color = Color(2.5, 1.5, 1, 1)
alpha_curve = SubResource("CurveTexture_gw5d1")
hue_variation_min = -2.23517e-08
hue_variation_max = -2.23517e-08

[sub_resource type="ArrayMesh" id="ArrayMesh_pwqfp"]
_surfaces = [{
"aabb": AABB(-1, -1, 0, 2, 2, 2),
"format": 34896613377,
"index_count": 12,
"index_data": PackedByteArray("AAABAAIAAgABAAMABAAFAAYABgAFAAcA"),
"name": "MuzzlePlanes",
"primitive": 3,
"uv_scale": Vector4(0, 0, 0, 0),
"vertex_count": 8,
"vertex_data": PackedByteArray("////f///AAAAAP9///8AAP///38AAAAAAAD/fwAAAAD/fwAA//8AAP9//////wAA/38AAAAAAAD/f///AAAAAA==")
}]
blend_shape_mode = 0

[sub_resource type="ArrayMesh" id="ArrayMesh_dmkd8"]
_surfaces = [{
"aabb": AABB(-1, -1, 0, 2, 2, 2),
"attribute_data": PackedByteArray("//8AAP////8AAAAAAAD/////AAD/////AAAAAAAA//8="),
"format": 34896613399,
"index_count": 12,
"index_data": PackedByteArray("AAABAAIAAgABAAMABAAFAAYABgAFAAcA"),
"name": "MuzzlePlanes",
"primitive": 3,
"uv_scale": Vector4(0, 0, 0, 0),
"vertex_count": 8,
"vertex_data": PackedByteArray("////f///VNUAAP9///9U1f///38AAFTVAAD/fwAAVNX/fwAA//////9//////////38AAAAA////f///AAD//6qqqqqqqqqqqqqqqqqqqqr/v/9//7//f/+//3//v/9/")
}]
blend_shape_mode = 0
shadow_mesh = SubResource("ArrayMesh_pwqfp")

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_krxvi"]
transparency = 1
blend_mode = 1
cull_mode = 2
shading_mode = 0
vertex_color_use_as_albedo = true
vertex_color_is_srgb = true
albedo_texture = ExtResource("2_gw5d1")
billboard_mode = 3
billboard_keep_scale = true
particles_anim_h_frames = 1
particles_anim_v_frames = 1
particles_anim_loop = false

[sub_resource type="Curve" id="Curve_plcon"]
_data = [Vector2(0, 0.8), 0.0, 0.0, 0, 0, Vector2(1, 0), 0.0, 0.0, 0, 0]
point_count = 2

[sub_resource type="CurveTexture" id="CurveTexture_huvch"]
curve = SubResource("Curve_plcon")

[sub_resource type="Curve" id="Curve_8iong"]
_data = [Vector2(0, 0), 0.0, 1.4, 0, 0, Vector2(1, 1), 0.0, 0.0, 0, 0]
point_count = 2

[sub_resource type="CurveTexture" id="CurveTexture_vcvrx"]
curve = SubResource("Curve_8iong")

[sub_resource type="ParticleProcessMaterial" id="ParticleProcessMaterial_uwn06"]
gravity = Vector3(0, 0, 0)
attractor_interaction_enabled = false
scale_curve = SubResource("CurveTexture_vcvrx")
color = Color(1.8, 1.4, 1, 0.8)
alpha_curve = SubResource("CurveTexture_huvch")

[sub_resource type="QuadMesh" id="QuadMesh_3cbtf"]
size = Vector2(1.2, 1.2)
center_offset = Vector3(0, 0, 0.3)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_huvch"]
transparency = 1
blend_mode = 1
cull_mode = 2
shading_mode = 0
disable_ambient_light = true
disable_fog = true
vertex_color_use_as_albedo = true
vertex_color_is_srgb = true
albedo_texture = ExtResource("4_plcon")
disable_receive_shadows = true
billboard_mode = 3
billboard_keep_scale = true
particles_anim_h_frames = 5
particles_anim_v_frames = 1
particles_anim_loop = true

[sub_resource type="Curve" id="Curve_vcvrx"]
_data = [Vector2(0, 0.5), 0.0, 0.0, 0, 0, Vector2(0.3, 0.5), 0.0, 0.0, 0, 0, Vector2(1, 0.3), 0.0, 0.0, 0, 0]
point_count = 3

[sub_resource type="CurveTexture" id="CurveTexture_uwn06"]
curve = SubResource("Curve_vcvrx")

[sub_resource type="Curve" id="Curve_3cbtf"]
_data = [Vector2(0, 0.6), 0.0, 0.0, 0, 0, Vector2(1, 1), 0.0, 0.0, 0, 0]
point_count = 2

[sub_resource type="CurveTexture" id="CurveTexture_g36m2"]
curve = SubResource("Curve_3cbtf")

[sub_resource type="ParticleProcessMaterial" id="ParticleProcessMaterial_8iong"]
particle_flag_damping_as_friction = true
emission_shape_offset = Vector3(0, 0, 0.05)
angle_min = -180.0
angle_max = 180.0
direction = Vector3(0, 0, 1)
spread = 5.0
initial_velocity_min = 1.5
initial_velocity_max = 2.0
gravity = Vector3(0, 0, 0)
damping_min = 4.0
damping_max = 8.0
attractor_interaction_enabled = false
scale_curve = SubResource("CurveTexture_g36m2")
color = Color(1, 1, 1, 0.1)
alpha_curve = SubResource("CurveTexture_uwn06")
anim_speed_min = 1.0
anim_speed_max = 1.0
anim_offset_min = 1.0
anim_offset_max = 1.0

[sub_resource type="QuadMesh" id="QuadMesh_vcvrx"]
size = Vector2(0.6, 0.6)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_plcon"]
transparency = 1
blend_mode = 1
cull_mode = 2
vertex_color_use_as_albedo = true
vertex_color_is_srgb = true
albedo_color = Color(1.3, 0.8, 0, 1)
albedo_texture = ExtResource("2_gw5d1")

[sub_resource type="Curve" id="Curve_krxvi"]
_data = [Vector2(0, 1), 0.0, -2.74145, 0, 0, Vector2(1, 0), -0.017978, 0.0, 0, 0]
point_count = 2

[sub_resource type="CurveTexture" id="CurveTexture_plcon"]
curve = SubResource("Curve_krxvi")

[sub_resource type="ParticleProcessMaterial" id="ParticleProcessMaterial_huvch"]
lifetime_randomness = 1.0
particle_flag_align_y = true
emission_shape = 1
emission_sphere_radius = 0.02
direction = Vector3(0, 0, 1)
spread = 10.0
initial_velocity_min = 3.0
initial_velocity_max = 8.0
gravity = Vector3(0, 0, 0)
damping_max = 10.0
attractor_interaction_enabled = false
scale_min = 0.05
scale_max = 0.15
color = Color(4.5, 2, 1, 1)
alpha_curve = SubResource("CurveTexture_plcon")

[sub_resource type="QuadMesh" id="QuadMesh_huvch"]
size = Vector2(0.1, 0.5)

[node name="ProjectileMuzzleFlash" type="Node3D"]
script = ExtResource("1_plcon")
MUZZLE_FLASH_RATIO = 0.4

[node name="Muzzle" type="GPUParticles3D" parent="."]
material_override = SubResource("StandardMaterial3D_kspet")
emitting = false
amount = 1
lifetime = 0.15
one_shot = true
randomness = 1.0
fixed_fps = 60
process_material = SubResource("ParticleProcessMaterial_plcon")
draw_pass_1 = SubResource("ArrayMesh_dmkd8")

[node name="Flash" type="GPUParticles3D" parent="."]
material_override = SubResource("StandardMaterial3D_krxvi")
emitting = false
amount = 1
lifetime = 0.08
one_shot = true
randomness = 1.0
fixed_fps = 60
process_material = SubResource("ParticleProcessMaterial_uwn06")
draw_pass_1 = SubResource("QuadMesh_3cbtf")

[node name="Smoke" type="GPUParticles3D" parent="."]
material_override = SubResource("StandardMaterial3D_huvch")
emitting = false
amount = 1
lifetime = 0.3
one_shot = true
randomness = 1.0
fixed_fps = 60
process_material = SubResource("ParticleProcessMaterial_8iong")
draw_pass_1 = SubResource("QuadMesh_vcvrx")

[node name="Sparks" type="GPUParticles3D" parent="."]
material_override = SubResource("StandardMaterial3D_plcon")
emitting = false
lifetime = 0.3
one_shot = true
explosiveness = 0.6
randomness = 1.0
fixed_fps = 60
process_material = SubResource("ParticleProcessMaterial_huvch")
draw_pass_1 = SubResource("QuadMesh_huvch")
